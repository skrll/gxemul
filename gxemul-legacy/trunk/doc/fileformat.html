<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Gavare's eXperimental Emulator:&nbsp;&nbsp;&nbsp;File format</title>
<meta name="robots" content="noarchive,nofollow,noindex"></head>
<body bgcolor="#f8f8f8" text="#000000" link="#4040f0" vlink="#404040" alink="#ff0000">
<table border=0 width=100% bgcolor="#d0d0d0"><tr>
<td width=100% align=center valign=center><table border=0 width=100%><tr>
<td align="left" valign=center bgcolor="#d0efff"><font color="#6060e0" size="6">
<b>GXemul:</b></font>&nbsp;&nbsp;<font color="#000000" size="6"><b>File format</b>
</font></td></tr></table></td></tr></table><p>

<!--

$Id: fileformat.html,v 1.1 2007-11-24 01:59:20 debug Exp $

Copyright (C) 2003-2007  Anders Gavare.  All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.
3. The name of the author may not be used to endorse or promote products
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
SUCH DAMAGE.

-->

<a href="./">Back to the index</a>

<p><br>
<h2>File format</h2>

<p>
<ul>
  <li><a href="#introduction">Introduction</a>
  <li><a href="#syntax">File format syntax</a>
  <li><a href="#example">Example</a>
  <li><a href="#actual">Actual usage</a>
</ul>




<p><br>
<a name="introduction"></a>
<h3>Introduction:</h3>

The configuration for an emulation setup in GXemul is stored in a file,
usually with the extension <tt><b>.gxemul</b></tt>.

<p>An emulation consists of various <i>components</i>, such as computers and
networks, and these in turn may contain sub-components. A machine may for
example contain processors, busses, and other devices.

<p>In addition to just having a hierarchical structure describing which
components and sub-components that exist in an emulation, the <i>graphical
layout</i> is also stored, as a set of coordinates. The layout is not necessary
to run the emulation, and indeed, the command-line verison of GXemul
ignores the graphical layout. The GUI version of GXemul, however, uses
the layout information to display a graphical representation of the
emulation on screen.

<p>(Although it would have been possible to use
<a href="http://en.wikipedia.org/wiki/XML">XML</a> to represent emulations,
that would have led to either having to include an XML library as an additional
dependency for building and running the emulator, or having to implement such
a library from scratch. I therefore choose to use the simpler file format
described here.)





<p><br>
<a name="syntax"></a>
<h3>File format syntax:</h3>

The two concepts used in GXemul's configuration files are <i>nodes</i>
and <i>attributes</i>. A node has a name, and contains zero or more sub-nodes.
An attribute has a name and a value.

<p>The syntax is loosely defined as follows:<pre>
	Node:         <b>"</b>name<b>"</b> <b>{</b> zero-or-more-nodes-or-attributes <b>}</b>
	Attribute:    <b>"</b>name<b>"</b> <b>=</b> <b>"</b>value<b>"</b>
</pre>

<p>A <tt><b>.gxemul</b></tt> file only contains one node, the root node.

<p>There is no support for comments in the file format. Any whitespace is
ignored when reading (except inside strings), and a writer is free to output
whitespace freely. Names and values are unicode strings. Names cannot be
empty strings, while values can be empty strings.

<p>Nodes and attributes may be interleaved in any order.

<p>Strings are escaped using C-style escapes.




<p><br>
<a name="example"></a>
<h3>Example:</h3>

A bogus example:
<pre>
	"emulation"
	{
		"machine"
		{
			"name" = "Embedded test machine"
			"type" = "testmips"
		}
	}
</pre>





<p><br>
<a name="actual"></a>
<h3>Actual usage:</h3>

In many cases, a <tt><b>.gxemul</b></tt> file is not useful by itself.
The typical example is when emulating one or more machines that have harddisk
image files associated with them. The image files are not stored
in the configuration file itself. The recommended practice is as follows:

<ul>
	<li>Each emulation should be placed in a separate directory.
		This directory should contain one configuration file,
		and any other files (such as disk image files) that
		are used by the emulation setup.
</ul>

<p>So, if the emulation refers to a harddisk image called
"<tt>netbsd_pmax.img</tt>"
(a filename without full path specified), it will look in the same directory
as the configuration file.


</body>
</html>

