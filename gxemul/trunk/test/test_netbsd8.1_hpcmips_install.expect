#!/usr/local/bin/expect

set timeout 4000
spawn ./gxemul -e mobilepro770 -q -d nbsd8.1_hpcmips.img -d b:../../emul/mips/netbsd-hpcmips-8.1/NetBSD-8.1-hpcmips.iso ../../emul/mips/netbsd-hpcmips-8.1/netbsd.gz

expect " in English"
send "\r"
expect "Install NetBSD to"
send "\r"
expect "b: Yes"
send "b\r"
expect "wd0"
send "\r"
expect "The number of cylinders"
send "\r\r"
expect "Use the entire disk"
send "b\r"
expect "Set sizes of NetBSD partitions"
send "\r"
expect "Accept partition sizes"
send "x\r"
expect "Partition sizes ok"
send "\r"
expect "Please enter a name for"
send "\r"
expect "b: Yes"
send "b\r"
expect "Hit enter to continue"
send "\r"
expect "a: Full installation"
send "\r"
expect "a: CD-ROM"
send "\r"
expect "cd0a"
send "a\r"
expect "device"
send "cd0d\r"
expect "x: Continue"
send "x\r"
expect "Hit enter to continue"
send "\r"
expect "Finished configuring"
send "\r"
expect "Hit enter to continue"
send "\r"
expect "Exit Install System"
send "x\r"
expect "#"
send "mount /dev/wd0a /mnt\r"
expect "#"
send "echo 'console \"/usr/libexec/getty std.9600\" vt100 on secure' >> /mnt/etc/ttys\r"
expect "#"
send "sync\r"
expect "#"
send "sleep 2\r"
expect "#"
send "umount /mnt\r"
expect "#"
send "sync\r"
expect "#"
send "sleep 2\r"
expect "#"
send "halt -p\r"

close

